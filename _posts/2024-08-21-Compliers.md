---
layout: post
title:  编译原理笔记
date:   2024-08-21 16:00:00 +0800
last_change_date: 2024-08-21 16:00:00 +0800
categories: notes
brief_introduction: 
tags: notes
# related_posts: Welcome to Jekyll!
---

## 1 导论
编译是将程序设计语言翻译为机器语言的过程。本课程是为了了解PL的基本要素、工作原理、语言翻译的基本方法。
一般把汇编翻译为机器语言称为汇编，把高级语言翻译为汇编或机器指令成为编译。高级语言之间变化称为转换。逆向称为反汇编，反编译
### 编译与解释
  - 编译：先翻译后执行——C的编译
  - 解释：边翻译边执行——Python解释器

### 高级语言主要成分
  - 语（词）法：表达式，语句，函数等
  - 语义：解释单词符号和语法单位的意义

### 编译过程

* 1.词法分析：根据词法规则使用正规式（正则表达式）和有限自动机（有限状态机）将程序拆解为基本元素。
* 2.语法分析：判断语法是否正常（连词成句？）
* 3.语义分析与中间代码生成：根据语法分析的结果分析含义（语句是否通顺），并进行初步翻译，产生中间代码（一种语言）。
* 4.代码优化：编译器级别的优化，针对中间代码。
* 5.目标代码生成：翻译中间代码为目标代码。

- 另外的元素
  - 表格管理：维护代码中元素的内容。
  - 出错处理：`try{...}catch(error e)`，包括语法错误和语义错误。（拼写错误和语句不通顺）。

## 2 词法分析
### 2.1 概述
程序中的记号分为以下五类：
- 关键字；
- 标识符：函数，变量等用户自定义内容；
- 字面量：数值，字符串等；
- 运算符；
- 分界符：标点符号；

对于某个记号，包含2个部分，类别与别的信息，为了便于区分，称记号的类别为记号，其他信息称为属性。
#### 词法分析器功能与工作方式
功能：
- 识别单词符号翻译为单词
- 删除无用字符
- 删除注释
- 词法检查（拼写错误）

工作方式
- 1.直接翻译为记号流：设计简单，效率高，可移植性好；输出占用内存大；
- 2.作为语法分析器的子程序执行，共同维护符号表：易于实现；
- 3.与语法分析器并行执行：维护记号流队列；

#### 源程序的输入与预处理
输入：双缓存区；
预处理：删去无用字符与注释；

### 2.2 模式的形式化描述
定义：
  语言L是有限字母表∑上有限长度的字符串的集合。
  字母表是符号的非空有限集合，字符串是符号的有穷序列。
  子串是原串在前或后删去>=0个字符的部分。
  $\epsilon$表示长度为0的字符串

对于字符串的基本运算
$X^R$表示逆转；
$xy$表示java中的$x+y$；
$x|y$表示java中的$x \space or \space y$
$x^n$表示x重复n次，$x^0 = \epsilon$
$x^*$表示x重复大于等于0次的字符串的集合，即$x^* = \{ x^0 , x^1 ,...\}$;
$x^* == x^+ | \epsilon $

运算的预先级为`*`,`+`(连接运算),`|`;

例 2.7 令 $r=\{d,.,e,+,-\}$，其中$d$为$0 \sim 9$的数字，则$r$上表示的无符号数的集合的正规式为:
$$d^* (dd^* | \epsilon)(e(+|-|\epsilon)dd^* |\epsilon)$$

对于该式的解析：
第一个$d^*$表示数值位至少有一位，$(dd^* | \epsilon)$表示0到n位的数值位，e是指数标识符，$(+|-|\epsilon)$表示指数符号，$e(+|-|\epsilon)dd^*$是有指数时的字符串。

$L(x)$指正则表达式对应的集合；

正规式的简化：
1.简化正规式描述
  $$
  x^* = x^+ | \epsilon
  $$
  $$
  r?=r|\epsilon
  $$
  $$
  L([abc]) = \{a|b|c\}
  $$
  $$
  [0-9a-z] = [012...789abc...xyz]
  $$
  $$\Sigma = \{a,b,c,d,e,f,g,h\} , L([\space \^{} abc]) = \{d,e,f,g,h\}$$
2.引入辅助定义式（变量）
  $$char=[a-z\space A-Z]$$
  $$digit=[0-9]$$
  $$digits=digits^+$$
  $$optional\_ fraction=(. digits)?//纯小数$$
  $$optional\_ exponent=(E(+|-)?\space digits)?//整数$$
  $$id=char(char|digit)//首位为字母开头的id字符串$$
  $$num=digit\space optional\_ fraction\space optional\_ exponent//数字字符串$$

### 2.3 有限自动机（有限状态机）
能否确定下一个状态将自动机分为确定型与非确定型。
#### 状态转换图

